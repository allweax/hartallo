#include "hl_config.h"
#include "hartallo/hl_types.h"

#if HARTALLO_CODEC_264_TABLES_H
#error "Do not add header file."
#endif


// Multiplication factor (MF) used for 4x4 forward qantization
HARTALLO_EXPORT /*static*/ const HL_ALIGN(HL_ALIGN_V) int32_t HL_CODEC_264_QUANT_MF[6/*QP%6*/][4][4] = {
    {{13107, 8066,13107, 8066},{ 8066, 5243, 8066, 5243},{13107, 8066,13107, 8066},{ 8066, 5243, 8066, 5243}},
    {{11916, 7490,11916, 7490},{ 7490, 4660, 7490, 4660},{11916, 7490,11916, 7490},{ 7490, 4660, 7490, 4660}},
    {{10082, 6554,10082, 6554},{ 6554, 4194, 6554, 4194},{10082, 6554,10082, 6554},{ 6554, 4194, 6554, 4194}},
    {{ 9362, 5825, 9362, 5825},{ 5825, 3647, 5825, 3647},{ 9362, 5825, 9362, 5825},{ 5825, 3647, 5825, 3647}},
    {{ 8192, 5243, 8192, 5243},{ 5243, 3355, 5243, 3355},{ 8192, 5243, 8192, 5243},{ 5243, 3355, 5243, 3355}},
    {{ 7282, 4559, 7282, 4559},{ 4559, 2893, 4559, 2893},{ 7282, 4559, 7282, 4559},{ 4559, 2893, 4559, 2893}}
};

// "qBits" used in 4x4 forward qantization
// qBits = (15 + floor(QP/6));
HARTALLO_EXPORT /*static*/ const HL_ALIGN(HL_ALIGN_V) int32_t HL_CODEC_264_QUANT_QBITS[52/*QP*/] = {
    15, 15, 15, 15, 15, 15, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 18, 18,
    18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21,
    21, 21, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23
};

// "F"actor (for rounding) used in 4x4 forward qantization
// qBits = (15 + floor(QP/6));
// Factor(f) = INTRA ? (1 << qBits)/3 : (1 << qBits)/6;
HARTALLO_EXPORT /*static*/ const HL_ALIGN(HL_ALIGN_V) int32_t HL_CODEC_264_QUANT_F[2/*INTRA?*/][52/*QP*/] = {
    {
        5461, 5461, 5461, 5461, 5461, 5461, 10922, 10922, 10922, 10922, 10922, 10922,
        21845, 21845, 21845, 21845, 21845, 21845, 43690, 43690, 43690, 43690, 43690, 43690
        , 87381, 87381, 87381, 87381, 87381, 87381, 174762, 174762, 174762, 174762, 174762
        , 174762, 349525, 349525, 349525, 349525, 349525, 349525, 699050, 699050, 699050
        , 699050, 699050, 699050, 1398101, 1398101, 1398101, 1398101
    },
    {
        10922, 10922, 10922, 10922, 10922, 10922, 21845, 21845, 21845, 21845, 21845,
        21845, 43690, 43690, 43690, 43690, 43690, 43690, 87381, 87381, 87381, 87381, 87381,
        87381, 174762, 174762, 174762, 174762, 174762, 174762, 349525, 349525, 349525,
        349525, 349525, 349525, 699050, 699050, 699050, 699050, 699050, 699050, 1398101,
        1398101, 1398101, 1398101, 1398101, 1398101, 2796202, 2796202, 2796202, 2796202
    }
};